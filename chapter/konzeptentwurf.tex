\chapter{Systematischer Konzeptentwurf}
\label{cha:konzeptentwurf}

Der Konzeptentwurf folgt einem strukturierten Vorgehen nach dem Systems-Engineering-Ansatz, wie er in \autocite{schlueterGenericSystemsEngineering2023 } beschrieben ist. Ziel ist es, das technische System schrittweise zu entwickeln und die Komplexität durch eine klare inhaltliche Gliederung zu reduzieren. In diesem Kapitel wird ausgehend von der definierten Aufgabenstellung ein geeignetes Gesamtkonzept für einen autonom Othello spielenden Roboter erarbeitet.

Zunächst wird in Abschnitt~\ref{sec:ausgangssituation} die Ausgangssituation beschrieben. Diese umfasst den Spielaufbau, die geltenden Spielregeln sowie die technischen und organisatorischen Rahmenbedingungen. Die Festlegung dieser Randbedingungen erfolgte teamübergreifend, um ein einheitliches und vergleichbares Spiel zwischen den Robotersystemen sicherzustellen.
Darauf aufbauend werden in Abschnitt~\ref{sec:anforderungen} die Anforderungen an das technische System definiert. Es wird zwischen funktionalen Anforderungen, nicht-funktionalen Anforderungen und Randbedingungen unterschieden. Diese Strukturierung dient der weiteren Konkretisierung der Aufgabenstellung, der Eingrenzung des Lösungsraums sowie als Grundlage für die spätere Verifikation und Bewertung des erarbeiteten Konzepts.
In Abschnitt~\ref{sec:funktionsanalyse} wird das technische System funktional betrachtet. Die Hauptfunktion, das Spiel Othello autonom gemäß den vorgegebenen Regeln auszuführen und das Ziel des Gewinns zu verfolgen, wird in mehrere Teilfunktionen zerlegt. Diese funktionale Zerlegung reduziert die Systemkomplexität und bildet die Grundlage für die Entwicklung geeigneter Lösungsansätze.
Anschließend werden in Abschnitt~\ref{sec:loesungsansaetze} für die identifizierten Teilfunktionen mehrere Lösungsansätze erarbeitet und miteinander verglichen. Die Bewertung erfolgt mithilfe einer Nutzwertanalyse auf Basis festgelegter Kriterien und Gewichtungen. Ziel ist die nachvollziehbare Auswahl eines konsistenten Gesamtkonzepts. Der Schwerpunkt liegt dabei auf der Bestimmung des nächsten Spielzugs sowie auf dessen Ausführung.
Die Auswahl der betrachteten Lösungsansätze basiert auf den in Kapitel~\ref{cha:Grundlagen} dargestellten theoretischen Grundlagen sowie auf der Analyse und Simulation bestehender Spielalgorithmusansätze in Kapitel~\ref{cha:stand-der-technik}. Diese Untersuchungen stützen sich auf eine fortlaufende und umfangreiche Literaturrecherche.



\section{Ausgangssituation und Rahmenbedingungen}
\label{sec:ausgangssituation}
Zu Beginn des Konzeptentwurfs wurde die Aufgabenstellung präzisiert, indem der konkrete Spielaufbau, die geltenden Spielregeln sowie weitere technische und organisatorische Rahmenbedingungen eindeutig festgelegt wurden. Diese Festlegungen sind erforderlich, um ein regelkonformes und vergleichbares Spiel zwischen Robotern unterschiedlicher Teams zu ermöglichen. Die Erarbeitung der Spezifikationen erfolgte in gemeinsamer Abstimmung aller beteiligten Parteien. Im Folgenden werden diese Spezifikationen beschrieben und die vorliegende Ausgangssituation analysiert.

\paragraph{Spielplattform}
Zur Reduktion der Systemkomplexität wird als Spielplattform eine digitale Umgebung anstelle eines physischen Bretts verwendet. Das Spiel wird von beiden Robotern auf einem Tablet des Herstellers Apple (iPad) ausgeführt. Hierfür kommt die Applikation \glqq Reverse (Othello)\grqq{} \autocite{marcarelliReverseOthello2025} zum Einsatz, die für iPad und iPhone entwickelt wurde und das gemeinsame Spielen auf einem einzelnen Endgerät ermöglicht. Es werden die Standardeinstellungen der App verwendet, wobei die implementierten Spielregeln gelten, wie sie auch in Abschnitt~\ref{sec:othello} beschrieben sind.
Die Beschränkung auf eine digitale Spielumgebung vereinfacht den Systementwurf, da das Greifen, Bewegen und Rotieren physischer Spielsteine entfällt. Dadurch wird der mechatronische und algorithmische Aufwand reduziert und eine Umsetzung innerhalb des Projektzeitraums mit den verfügbaren Komponenten ermöglicht.

\paragraph{Spielaufbau}
Das Tablet wird flach und zentriert auf einem Tisch positioniert. Eine geringe Aufbauhöhe ist anzustreben, vorzugsweise ohne Schutzhülle. Es wird die standardmäßige Darstellung des Spielfelds der App in der jeweils vorgegebenen Auflösung verwendet. Da sich Tablets in ihrer physikalischen Größe unterscheiden können, muss das Robotersystem die Spielfeldabmessungen dynamisch erfassen. Eine entsprechende Kalibrierung oder Anpassung ist vor Spielbeginn durchzuführen.
Zur Definition eines einheitlichen Größenbereichs wird das Spielfeld auf eine minimale quadratische Kantenlänge von \SI{14}{\centi\metre} (entspricht einer Darstellung auf einem iPad Air mit 11~Zoll) sowie auf eine maximale Kantenlänge von \SI{19}{\centi\metre} (entspricht einer Darstellung auf einem iPad Pro mit 13~Zoll) beschränkt. Die beiden Roboter sind auf gegenüberliegenden Spielhälften anzuordnen. Um das Spielfeld ist ein Sicherheitsabstand von mindestens \SI{5.0}{\centi\metre} einzuhalten. Zur Vermeidung von Kollisionen darf der aktive Roboter während seines Spielzugs nicht in den Ruhezustandsbereich des gegnerischen Teams eindringen. Gleichzeitig darf der pausierende Roboter seinen definierten Ruhezustandsbereich nicht verlassen. Die Benutzeroberfläche der App sowie der Spielaufbau mit eingezeichneten Bereichen und Abmessungen sind in Abbildung~\ref{fig:spielaufbau} dargestellt.

\begin{figure}[hbt]
	\centering
	\begin{tikzpicture}[scale=0.8, transform shape] 
		% Bild auf Textbreite
		\node[anchor=south west, inner sep=0] (img) at (0,0)
		{\includegraphics[width=\linewidth]{images/spielaufbau}};
		
		\begin{scope}[x={(img.south east)},y={(img.north west)},xscale=1/30,yscale=1/20]
			
			\draw[<->,line width=0.75pt, color=white] (10.5,14) -- (19.5,14) node[midway,below,font=\footnotesize,text=white,transform shape=false]{\SI{14}{\centi\metre} - \SI{19}{\centi\metre}};
			\draw[<->,line width=0.75pt, color=white] (11,5.5) -- (11,14.5) node[midway,below,rotate=90,font=\footnotesize,text=white,transform shape=false]{\SI{14}{\centi\metre} - \SI{19}{\centi\metre}};
			
			\fill[pattern=north east lines, pattern color=red!70] (0,0) rectangle (7.75,20);
			\draw[red, line width=1pt] (0,0) -- (7.75,0) -- (7.75,20) -- (0,20);
			\node[transform shape=false, align=center, inner sep=6pt, fill=white, fill opacity=0.8, text opacity=1, rounded corners=6pt, font=\normalsize] at (3.75,10) {Ruhezustands-\\bereich\\Roboter 1};
			
			\fill[pattern=north east lines, pattern color=blue!70] (22.25,0) rectangle (30,20);
			\draw[blue, line width=1pt] (30,20) -- (22.25,20) -- (22.25,0) -- (30,0);
			\node[transform shape=false, align=center, inner sep=6pt, fill=white, fill opacity=0.8, text opacity=1, rounded corners=6pt, font=\normalsize] at (26.25,10) {Ruhezustands-\\bereich\\Roboter 2};
			
			\draw[green!70!black, dashed, line width=1.0pt] (8,3) rectangle (22,17);
			\node[anchor=west,font=\normalsize,text=black,transform shape=false] at (7.75,17.75) {Sicherheitszone};
			
			\draw[<->,line width=0.75pt,color=black] (8,2) -- (10.5,2)
			node[midway,below,font=\footnotesize,transform shape=false]{\SI{5}{\centi\metre}};
			\draw[line width=0.35pt] (8,2) -- ++(0,1);
			\draw[line width=0.35pt] (8,2) -- ++(0,-0.5);
			\draw[line width=0.35pt] (10.5,2) -- ++(0,3.5);
			\draw[line width=0.35pt] (10.5,2) -- ++(0,-0.5);
			
			\draw[<->,line width=0.75pt,color=black] (19.5,2) -- (22,2)
			node[midway,below,font=\footnotesize,transform shape=false]{\SI{5}{\centi\metre}};
			\draw[line width=0.35pt] (19.5,2) -- ++(0,3.5);
			\draw[line width=0.35pt] (19.5,2) -- ++(0,-0.5);
			\draw[line width=0.35pt] (22,2) -- ++(0,1);
			\draw[line width=0.35pt] (22,2) -- ++(0,-0.5);
			
%			\draw[step=1, gray!60, very thin] (0,0) grid (30,20);
%			\draw[red, line width=0.6pt] (0,0) rectangle (30,20);

		\end{scope}
	\end{tikzpicture}
	\vspace{0.5\baselineskip}
	\caption[Spielaufbau mit Sicherheits- und Ruhezonen]{Spielaufbau mit Sicherheits- und Ruhezonen.}	
	\label{fig:spielaufbau}
\end{figure}

\paragraph{Spielablauf und Zeitregelung}
Wie in den Spielregeln definiert, beginnt der Spieler Schwarz, welcher durch Zufall bestimmt wird. Anschließend werden die Spielzüge abwechselnd durchgeführt, wobei die maximale Dauer eines einzelnen Spielzugs auf \SI{2}{\minute} begrenzt ist. Diese Zeitvorgabe kann im Verlauf des Projekts im gegenseitigen Einvernehmen angepasst werden.
Zur Übergabe der Spielzüge zwischen den Robotern wird eine digitale Schachuhr \autocite{seanoconnorMultiPlayerChess2021} verwendet. Diese ist webbasiert, erfordert keine Registrierung und kann über mehrere Endgeräte synchronisiert werden. Die Schachuhr wird auf einem Smartphone geöffnet. Die Positionierung des Smartphones sowie die Skalierung der Webseite obliegen den jeweiligen Teams.
Der Wechsel zum nächsten Spieler erfolgt durch Betätigung einer Schaltfläche auf dem berührungsempfindlichen Bildschirm, wobei sich die farbliche Darstellung der Benutzeroberfläche entsprechend ändert. Die Funktionalitäten sowie die Benutzeroberfläche der Schachuhr sind in Abbildung~\ref{fig:multi-player-chess-clock} dargestellt. Die Schachuhr dient ausschließlich der Zugübergabe und nicht der Erfassung der tatsächlichen Zugspielzeit.


\begin{figure}[hbt]
	\centering
	\input{tikz/reversi-board}
	\subfigure[Spieler 1 am Zug]{
	\includegraphics[width=0.2\linewidth]{images/multi-player-chess-clock-1}
	}
	\hspace{0.2\linewidth}
	\subfigure[Spieler 2 am Zug]{
	\includegraphics[width=0.2\linewidth]{images/multi-player-chess-clock-2}
	}
	\caption[Digitale Schachuhr zur Zugübergabe]{Benutzeroberfläche der digitalen Schachuhr zur Zugübergabe. In (a) ist Spieler~1 am Zug, in (b) Spieler~2. Der Spielerwechsel erfolgt durch Betätigung der hervorgehobenen Schaltfläche.}
	\label{fig:multi-player-chess-clock}
\end{figure}

\paragraph{Hardwareeinschränkungen}
Die Interaktion des Roboters mit dem Tablet erfolgt ausschließlich über einen Touchstift oder einen vergleichbaren mechanischen Betätigungsmechanismus. Die konkrete technische Ausführung, etwa in Bezug auf Geometrie, Befestigung und Art der Betätigung, ist nicht standardisiert und den jeweiligen Teams überlassen.
Für den Aufbau des Roboters dürfen ausschließlich Bauteile aus dem LEGO\textsuperscript{\textregistered} Education SPIKE\texttrademark{} Prime Baukastensystem verwendet werden. Ergänzend ist der Einsatz weniger selbst gefertigter 3D-gedruckter Komponenten zulässig, beispielsweise zur Fixierung des Touchstifts. Stationäre Roboterelemente dürfen im Ruhezustandsbereich auf der Tischfläche befestigt werden, etwa mittels Klettband, Klebeband oder vergleichbarer Hilfsmittel.
Das Steuerungsprogramm des Roboters sowie der Spielalgorithmus sind vollständig auf dem im Set enthaltenen Mikrocontroller zu implementieren. Der Systemaufbau des Baukastensystems, die verfügbaren Komponenten und die Programmierumgebung werden in Abschnitt~\ref{sec:lego-spike} beschrieben.
Zu berücksichtigen ist, dass die begrenzte Anzahl an Sensoren und Aktoren sowie die eingeschränkte Rechenleistung des Mikrocontrollers wesentliche Randbedingungen für den Konzeptentwurf darstellen. Zusätzlich führen die ausschließlich steckbaren Klemmbausteinverbindungen, die Materialelastizität der Kunststoffbauteile sowie das mechanische Spiel in Getriebekomponenten und Motoren zu einer reduzierten Positioniergenauigkeit. Diese Einschränkungen sind im mechanischen und algorithmischen Entwurf entsprechend zu berücksichtigen.

\paragraph{Organisatorischer Rahmen und Projektstruktur}
Die Bearbeitung der Aufgabenstellung erfolgt in zwei zeitlich getrennten dreimonatigen Akademiephasen, deren Ergebnisse jeweils in einer Studienarbeit dokumentiert werden. Die vorliegende Arbeit widmet sich dem systematischen Konzeptentwurf sowie den algorithmischen und spieltheoretischen Grundlagen. Die praktische Umsetzung erfolgt in der anschließenden Studienarbeit. Dort werden zudem ein Turnier (\emph{Machine vs. Machine}), die Prämierung des Gewinners sowie die Präsentation des entwickelten Roboters durchgeführt.

\section{Definition und Analyse der Anforderungen}
\label{sec:anforderungen}

Basierend auf der Spezifikation der Rahmenbedingungen sowie der Analyse der Ausgangssituation werden im Folgenden die Anforderungen an das technische System definiert und analysiert. 
Das betrachtete technische System ist ein autonom agierender Roboter, dessen Aufgabe es ist, gegen einen weiteren Roboter das Spiel Othello gemäß den festgelegten Regeln, dem definierten Spielaufbau und dem vorgegebenen Ablauf auszuführen und dabei das Ziel des Gewinns zu verfolgen. Die Definition der Anforderungen dient sowohl der weiteren Konkretisierung der Aufgabenstellung als auch der Verifikation und Bewertung des erarbeiteten Konzepts.

Die nachfolgenden Anforderungen beziehen sich auf das Gesamtsystem. Hardware- und Softwarekomponenten werden dabei gemeinsam betrachtet. Eine weitergehende Zerlegung der Anforderungen auf Subsystem-, Funktions- oder Komponentenebene ist nicht Gegenstand dieser Arbeit. Gemäß \autocite{pohlBasiswissenRequirementsEngineering2021a} werden die Anforderungen in drei Kategorien unterteilt:

\begin{enumerate}
	\item \textbf{Funktionale Anforderungen (FA):}  
	Beschreiben die vom technischen System bereitzustellenden Funktionen und Verhaltensweisen. Sie legen fest, welche Aufgaben das System ausführen muss, um die Zielsetzung der Aufgabenstellung zu erfüllen.
	
	\item \textbf{Nicht-funktionale Anforderungen (NFA):}  
	Beschreiben qualitative Eigenschaften, Leistungsmerkmale oder Gütekriterien des Systems, wie beispielsweise Genauigkeit, Robustheit, Zeitverhalten oder Zuverlässigkeit. Sie konkretisieren, in welcher Qualität die funktionalen Anforderungen zu erfüllen sind.
	
	\item \textbf{Randbedingungen (RB):}  
	Definieren Einschränkungen des Lösungsraums, die sich aus organisatorischen, technischen oder projektspezifischen Vorgaben ergeben. Randbedingungen beschreiben, unter welchen Voraussetzungen und mit welchen Mitteln das System realisiert werden darf bzw. was ausdrücklich ausgeschlossen ist.
\end{enumerate}

Darüber hinaus werden die Anforderungen nach ihrer Kritikalität (Krit.) auf einer Skala von 1 bis 10 priorisiert, welche die Bedeutung einzelner Anforderungen für die Zielerreichung angibt. Die Anforderungen sind nicht als abgeschlossen zu verstehen, sondern können im Projektverlauf weiter konkretisiert, ergänzt oder angepasst werden. Eine strukturierte Übersicht der funktionalen Anforderungen, der nicht-funktionalen Anforderungen sowie der Randbedingungen ist in den Tabellen~\ref{tab:funktionale_anforderungen}, \ref{tab:nichtfunktionale_anforderungen} und \ref{tab:randbedingungen} dargestellt.

% ------------------------------------------------------------
% FUNKTIONALE ANFORDERUNGEN
% ------------------------------------------------------------
{
	\renewcommand{\arraystretch}{1.5}
	
	\begin{longtable}{
			>{\centering\arraybackslash}p{0.10\linewidth}
			p{0.72\linewidth}
			>{\centering\arraybackslash}p{0.10\linewidth}
		}
		\captionabove[Auflistung der funktionalen Anforderungen]{Auflistung der funktionalen Anforderungen an das technische System.}
		\label{tab:funktionale_anforderungen} \\
		
		\hline
		\textbf{ID} & \textbf{Funktionale Anforderung}: Das tech. System \textbf{muss} \dots & \textbf{Krit.} \\
		\hline
		\endfirsthead
		
		\hline
		\textbf{ID} & \textbf{Funktionale Anforderung}: Das tech. System \textbf{muss} \dots & \textbf{Krit.} \\
		\hline
		\endhead
		
		\hline
		\multicolumn{3}{r}{\emph{Fortsetzung auf der nächsten Seite}} \\
		\endfoot
		
		\hline
		\endlastfoot
		
		FA-1 & das Spiel Othello vollständig und regelkonform gemäß den festgelegten Spielregeln ausführen. & 10 \\
		
		FA-2 & den aktuellen Spielzustand erfassen, einschließlich der vollständigen Belegung des Spielfelds sowie der zuletzt ausgeführten gegnerischen Spielzüge. & 10 \\
		
		FA-3 & auf Basis des erfassten Spielzustands einen zulässigen und unter den gegebenen Hardwareeinschränkungen bestmöglichen Spielzug bestimmen, ohne externe Eingriffe oder Unterstützung. & 10 \\
		
		FA-4 & Spielzüge präzise und reproduzierbar über eine mechanische Touch-Eingabe auf dem Tablet ausführen und den Abschluss des Spielzugs eindeutig an den nächsten Spieler übergeben. & 9 \\
		
		FA-5 & die definierten Sicherheits- und Ruhezustandsbereiche während des gesamten Spielbetriebs jederzeit einhalten. & 10 \\
		
		FA-6 & jeden Spielzug innerhalb der maximal zulässigen Zugzeit vollständig abschließen. & 8 \\
		
	\end{longtable}
}

% ------------------------------------------------------------
% NICHT-FUNKTIONALE ANFORDERUNGEN
% ------------------------------------------------------------
{
	\renewcommand{\arraystretch}{1.5}
	
	\begin{longtable}{
			>{\centering\arraybackslash}p{0.10\linewidth}
			p{0.72\linewidth}
			>{\centering\arraybackslash}p{0.10\linewidth}
		}
		\captionabove[Auflistung der nicht-funktionalen Anforderungen]{Auflistung der nicht-funktionalen Anforderungen an das technische System.}
		\label{tab:nichtfunktionale_anforderungen} \\
		
		\hline
		\textbf{ID} & \textbf{Nicht-funktionale Anforderung}: Das techn. System \textbf{soll} \dots & \textbf{Krit.} \\
		\hline
		\endfirsthead
		
		\hline
		\textbf{ID} & \textbf{Nicht-funktionale Anforderung}: Das techn. System \textbf{soll} \dots & \textbf{Krit.} \\
		\hline
		\endhead
		
		\hline
		\multicolumn{3}{r}{\emph{Fortsetzung auf der nächsten Seite}} \\
		\endfoot
		
		\hline
		\endlastfoot
		
		NFA-1 & Touch-Eingaben auch bei geringen Lage- oder Positionierungsabweichungen des Tablets zuverlässig ausführen. & 6 \\
		
		NFA-2 & nach dem Einschalten selbstständig einen definierten und reproduzierbaren Initialzustand einnehmen. & 6 \\
		
		NFA-3 & fehlerhafte oder nicht eindeutig erkannte Touch-Eingaben erkennen und selbstständig korrigieren oder wiederholen. & 5 \\
		
		NFA-4 & Kalibrier- und Bewegungsparameter ohne Änderung des Quellcodes anpassbar halten. & 5 \\
		
	\end{longtable}
}

% ------------------------------------------------------------
% RANDBEDINGUNGEN
% ------------------------------------------------------------
{
	\renewcommand{\arraystretch}{1.5}
	
	\begin{longtable}{
			>{\centering\arraybackslash}p{0.10\linewidth}
			p{0.72\linewidth}
			>{\centering\arraybackslash}p{0.10\linewidth}
		}
		\captionabove[Auflistung der Randbedingungen]{Auflistung der Randbedingungen an das technische System.}
		\label{tab:randbedingungen} \\
		
		\hline
		\textbf{ID} & \textbf{Randbedingung}: Das techn. System \textbf{darf} bzw. \textbf{muss} \dots & \textbf{Krit.} \\
		\hline
		\endfirsthead
		
		\hline
		\textbf{ID} & \textbf{Randbedingung}: Das techn. System \textbf{darf} bzw. \textbf{muss} \dots & \textbf{Krit.} \\
		\hline
		\endhead
		
		\hline
		\multicolumn{3}{r}{\emph{Fortsetzung auf der nächsten Seite}} \\
		\endfoot
		
		\hline
		\endlastfoot
		
		RB-1 & ausschließlich Komponenten des LEGO\textsuperscript{\textregistered} Education SPIKE\texttrademark{} Prime Baukastensystems sowie ergänzend einzelne selbst gefertigte 3D-Druckteile verwenden. & 9 \\
		
		RB-2 & Steuerungssoftware und Spielalgorithmus vollständig lokal auf dem im Baukastensystem enthaltenen Mikrocontroller ausführen und keine externe Rechner, Cloud-Dienste oder Netzwerke zur Spielentscheidung oder Zustandsbewertung verwenden.  & 8 \\
		
		RB-3 & Die Konzeption, Implementierung und Validierung des technischen Systems müssen vollständig innerhalb des vorgesehenen Projektzeitraums erfolgen. & 8 \\
		
		
	\end{longtable}
}


\section{Funktionale Analyse des Systems}
\label{sec:funktionsanalyse}

Auf Basis der definierten Anforderungen wird die Hauptfunktion des Systems in einzelne Teilfunktionen zerlegt und analysiert. Die Hauptfunktion besteht darin, gegen einen weiteren Roboter das Spiel Othello gemäß den festgelegten Regeln, dem definierten Spielaufbau und dem vorgegebenen Ablauf auszuführen und dabei das Ziel des Gewinns zu verfolgen. Die funktionale Zerlegung dient der systematischen Strukturierung des Gesamtsystems, um die Komplexität zu reduzieren und klar abgegrenzte Schnittstellen zu definieren. Dadurch können die einzelnen Teilfunktionen weitgehend unabhängig voneinander untersucht und jeweils geeignete Lösungsansätze abgeleitet werden. Die Abbildung~\ref{fig:funktionsanalyse} zeigt den anfänglichen Spielablauf sowie die Unterteilung des eigenen Spielzugs in mehrere Teilfunktionen.

\begin{figure}[hbt]
	\centering
	\begin{tikzpicture}[
		x=\linewidth/110, 
		y=\linewidth/110,
		line cap=round,
		line join=round
		]
		
		% -------- Parameter --------
		\def\XMAX{110}
		\def\YMAX{70}
		\def\MAJOR{10}
		\def\MINOR{1}
		
		% -------- Raster --------
		%\draw[very thin, gray!20] (0,0) grid[step=\MINOR] (\XMAX,\YMAX);
		%\draw[thin, gray!45] (0,0) grid[step=\MAJOR] (\XMAX,\YMAX);
		
		\path[draw=black, thin, fill=gray!25] (10,20) -- ++(25,0) -- ++(5,5) -- ++(-5,5) -- ++(-25,0) -- ++(5,-5) -- cycle;
		\node[align=center] at (25,25) {\footnotesize Erkennung des \\ \footnotesize Startbefehls};
		
		\path[draw=black, thin, fill=gray!25] (40,20) -- ++(25,0) -- ++(5,5) -- ++(-5,5) -- ++(-25,0) -- ++(5,-5) -- cycle;
		\node[align=center] at (55,25) {\footnotesize Erkennung der \\ \footnotesize Spielsituation};
		
		\path[draw=black, thin, fill=gray!25] (70,20) -- ++(25,0) -- ++(5,5) -- ++(-5,5) -- ++(-25,0) -- ++(5,-5) -- cycle;
		\node[align=center] at (85,25) {\footnotesize Bestimmung des \\ \footnotesize nächsten Spielzugs};
		
		\path[draw=black, thin, fill=gray!25] (10,0) -- ++(25,0) -- ++(5,5) -- ++(-5,5) -- ++(-25,0) -- ++(5,-5) -- cycle;
		\node[align=center] at (25,5) {\footnotesize Ausführung des \\ \footnotesize Spielzugs};
		
		\path[draw=black, thin, fill=gray!25] (40,0) -- ++(25,0) -- ++(5,5) -- ++(-5,5) -- ++(-25,0) -- ++(5,-5) -- cycle;
		\node[align=center] at (55,5) {\footnotesize Rückfahrt in die \\ \footnotesize Ruheposition};
		
		\path[draw=black, thin, fill=gray!25] (70,0) -- ++(25,0) -- ++(5,5) -- ++(-5,5) -- ++(-25,0) -- ++(5,-5) -- cycle;
		\node[align=center] at (85,5) {\footnotesize Beendigung des \\ \footnotesize Spielzugs};

		\path[draw=black, thin, fill=gray!10] (0,50) -- ++(25,0) -- ++(5,5) -- ++(-5,5) -- ++(-25,0) -- cycle;
		\node[align=center] at (15,55) {\footnotesize Kalibrierung, \\ \footnotesize Einmessung};
		
		\path[draw=black, thin, fill=gray!25] (30,50) -- ++(45,0) -- ++(5,5) -- ++(-5,5) -- ++(-45,0) -- ++(5,-5) -- cycle;
		\node[align=center] at (55,55) {\footnotesize Ausführung des eigenen Spielzugs};
		
		\path[draw=black, thin, fill=gray!10] (80,50) -- ++(25,0) -- ++(5,5) -- ++(-5,5) -- ++(-25,0) -- ++(5,-5) -- cycle;
		\node[align=center] at (95,55) {\footnotesize Prädiktion des \\ \footnotesize nächsten Zuges};
		
		\path[draw=black, thin, fill=gray!25] (101,26) -- ++(4,0) -- ++(0,-12) -- ++(-98,0) -- ++(0,-8) -- ++(5,0) -- ++(1,-1) -- ++(-1,-1) -- ++(-7,0) -- ++(0,12) -- ++(98,0) -- ++(0,8) -- ++(-2,0) -- ++(1,1) -- cycle;
		
		\draw [thick] (4, 31) -- (30, 49);
		\draw [thick] (106, 31) -- (80, 49);
		
		\draw [thick] (4, 0) -- ++(0, 31);
		\draw [thick] (106, 0) -- ++(0, 31);
		
		\draw [thick] (0, 49) -- ++(0, 14);
		\draw [thick] (30, 49) -- ++(0, 14);
		\draw [thick] (80, 49) -- ++(0, 14);
		\draw [thick] (110, 49) -- ++(0, 14);
		
		\draw[<->, thick] (1,62) -- ++(28,0)
		node[midway, above] {\footnotesize Vor Spielbeginn};
		
		\draw[<->, thick] (31,62) -- ++(48,0)
		node[midway, above] {\footnotesize Dauer: maximal \SI{2}{\minute}};
		
		\draw[<->, thick] (81,62) -- ++(28,0)
		node[midway, above] {\footnotesize Gegnerischer Spielzug};
		
	\end{tikzpicture}
	\vspace{0.5\baselineskip}
	\caption[Übersicht über Spielablauf und Teilfunktionen des eigenen Spielzugs]{Übersicht über Spielablauf und Teilfunktionen des eigenen Spielzugs.}
	\label{fig:funktionsanalyse}
\end{figure}

Bereits vor Spielbeginn muss das technische System über eine Funktion zur Kalibrierung und Einmessung verfügen. Diese dient der Bestimmung des Spielfelds sowie der relativen Position des Roboters zum Spielfeld, da diese Größen als dynamisch zu betrachten sind.
Ziel dieser Funktion ist es, die bedienende Person dabei zu unterstützen, die Kalibrierung präzise durchzuführen, ohne dass eine Anpassung des Quellcodes erforderlich ist. Die konkrete technische Umsetzung dieser Funktion ist vom gewählten Robotersystem abhängig und wird daher vorerst nicht weiter betrachtet.

Als nächste Funktion folgt die Ausführung des eigenen Spielzugs mit einer maximalen Gesamtdauer von \SI{2}{\minute}. Aufgrund dieser zeitlichen Begrenzung ist eine sinnvolle Aufteilung des Zeitpensums auf geeignete Unterfunktionen erforderlich. Die Ausführung erfolgt abwechselnd mit dem gegnerischen Spielzug.
Für die vorliegende Betrachtung wird angenommen, dass das System mit der Farbe Schwarz spielt und den ersten Zug ausführt. In der späteren Umsetzung wird bei der Farbe Weiß zunächst auf den Abschluss des gegnerischen Spielzugs gewartet.
Diese Funktion stellt die Hauptfunktion der Arbeit dar und gliedert sich in die folgenden sechs Teilfunktionen, die im Weiteren näher betrachtet werden.
\begin{enumerate}
	\item \textbf{Erkennung des Startbefehls:}  
	Zu Spielbeginn ist eine einmalige Eingabe durch die bedienende Person erforderlich, um den Start des Spiels zu signalisieren. Im weiteren Spielverlauf muss das System erkennen, dass die Schaltfläche der Schachuhr farblich auf Rot wechselt. Sobald diese Änderung detektiert wird, beginnt der eigene Spielzug.
	
	\item \textbf{Erkennung der Spielsituation:}  
	Anschließend ist die aktuelle Spielsituation zu erfassen, insbesondere die Position der Spielsteine nach dem gegnerischen Zug. Dabei kann auf den bekannten vorherigen Spielzustand sowie auf das Wissen über zulässige Folgezustände zurückgegriffen werden.
	
	\item \textbf{Bestimmung des nächsten Spielzugs:}  
	Zu Beginn wird überprüft, ob das Spiel bereits beendet ist. Anschließend bestimmt das System mithilfe eines Spielalgorithmus den nächsten eigenen Spielzug. Ziel ist es, einen Zug zu wählen, der unter Berücksichtigung der verfügbaren Rechenzeit langfristig zu einer Gewinnstrategie beiträgt. Hierbei soll ein möglichst großer Anteil des verfügbaren Zeitbudgets für die Entscheidungsfindung genutzt werden.
	
	\item \textbf{Ausführung des Spielzugs:}  
	Der ermittelte Spielzug wird anschließend ausgeführt. Ist kein regelkonformer Spielzug möglich, wird dieser Schritt übersprungen. Zur Ausführung fährt der Roboter aus dem Ruhezustandsbereich, positioniert sich präzise über dem Spielfeld und betätigt das Tablet mittels Touchstift oder eines vergleichbaren mechanischen Betätigungsmechanismus. Die Bewegung muss positionsgenau erfolgen, darf das Tablet nicht verschieben, soll möglichst wenig Zeit beanspruchen und darf den Ruhezustandsbereich des gegnerischen Roboters nicht durchqueren.
	
	\item \textbf{Rückfahrt in die Ruheposition:}  
	Nach der Ausführung des Spielzugs fährt der Roboter zurück in seine definierte Ruheposition.
	
	\item \textbf{Beendigung des Spielzugs:}  
	Abschließend wird der Spielzug durch die Betätigung der Schaltfläche der Schachuhr beendet und damit an den gegnerischen Spieler übergeben.
\end{enumerate}

Nach der Beendigung des eigenen Spielzugs folgt der gegnerische Spielzug. Während dieser Phase kann die verfügbare Zeit genutzt werden, um den Zug des Gegners zu prognostizieren und dadurch den Aufwand bei der anschließenden Erkennung der Spielsituation zu reduzieren. Alternativ besteht die Möglichkeit, diese Zeit – sofern technisch umsetzbar – zur Vorausplanung des nächsten eigenen Spielzugs zu verwenden.
Diese Funktionen während des gegnerischen Spielzugs sind funktional nicht zwingend erforderlich und dienen ausschließlich der Optimierung. Sie werden daher im Rahmen dieser Arbeit nicht weiter betrachtet.

Nach dem Abschluss des gegnerischen Spielzugs beginnt erneut die Ausführung des eigenen Spielzugs. Dieser Ablauf wiederholt sich zyklisch, bis das Ende des Spiels erkannt wird.

\section{Auswahl und Bewertung geeigneter Lösungsansätze}
\label{sec:loesungsansaetze}
%\todo[inline]{Für jede Teilfunktion mehrer Lösungsansätze präsentieren und diese Bewerten. Fokus auf Bestimmung des nächsten SPielzugs und RÜckfahr in die Ruheposition. Nutzweranalyse?}
%
%\todo[inline]{Tabelle mit Daten befüllen, Algorithmen vergleichen, Entscheidung begründen}

Das zur Umsetzung zu wählende Konzept wird anhand der funktionalen Analyse des Systems festgelegt. Dazu werden verschiedene Lösungsansätze für die in~\ref{sec:funktionsanalyse} bestimmten Teilfunktionen aufgezeigt und bewertet. 

\paragraph{Erkennung des Startbefehls}
\label{subsec:erkennung-startbefehl}

Wie bereits diskutiert, muss zu Beginn der Partie ein manueller Startbefehl ausgeführt werden. Aufgrund der Hardwareeinschränkung des Hubs in Form von 6 Input/Output Ports \autocite{legoreducationLEGOEducationSPIKEd} ist eine Umsetzung in den Rahmenbedingungen bevorzugt. Gezwungenermaßen sind bereits ein Port für den Farbsensor, ein Port für den Motor zur Aktuation und gegebenenfalls die übrigen vier Ports für die Ansteuerung der Robotermechanik notwendig, weshalb sich ein Startbefehl über den Tastendruck eines externen Taster nicht re. Da die Benutzeroberfläche der digitalen Schachuhr \ref{fig:multi-player-chess-clock} eine Starttaste zur Verfügung stellt, lässt sich die Startbedingung durch das Überwachen des Spielzuges auf eine erstmalige Rotdetektion realisieren. Programmtechnisch sollte der Controller dafür vor einem Spiel zurückgesetzt werden, um das Programm neu zu laden und den Roboter in eine Ausgangsposition zu bringen. Diese Ruheposition soll die Nullposition des Roboters darstellen und sich darin über der Spielerschaltfläche der Schachuhr befinden, um den nächsten Zug zu erwarten. Sie sollte zudem reproduzierbar sein, da sie im Laufe einer Partie sehr oft anzufahren ist. Der gewählte Ansatz dreht sich somit hauptsächlich um die Überwachung der Schaltfläche.

\paragraph{Erkennung der Spielsituation}
\label{subsec:erkennung-spielsituation}

Theoretisch stehen verschiedene Möglichkeiten zu Verfügung, die aktuelle Spielsituation zu erfassen. Durch eine Netzwerkanbindung könnte der Roboter die Position der Steine von dem verwendeten Tablet übertragen bekommen und in das gewünschte Format wandeln. Hierzu wäre eine Schnittstelle notwendig, um den Controller an das Tablet anzubinden, sowie ein Protokoll zur Datenübertragung. Des weiteren kann der Roboter jede einzelne Position des Spielfeldes abfahren, um jede Steinposition sofort zu erfassen und ohne Rechnung die Spielsituation zu sehen. Dies ist jedoch Zeitintensiv, da das Spielfeld 64 Felder besitzt. Unter der Annahme, der Roboter erkenne ein Feld pro Sekunde, verbringt er bereits über die Hälfte der Zeit des gesamten Spielzugs nur damit, die Situation zu erfassen. Dieser Ansatz kann optimiert werden, indem der digitale Klon des Spiels genutzt wird. Da zu jeder Zeit ohnehin bekannt sein muss, welche eigenen Züge durchgeführt werden können und dessen Folgen, so ist auch bekannt, welche Züge der Gegner durchführen kann. Dadurch muss nicht das gesamte Spielfeld eingelesen werden, sondern nur die Felder, auf denen ein Zug durchgeführt werden konnte. Anhand dessen wird dann der gegnerische Zug und die dadurch umzudrehenden Steine bestimmt.

\paragraph{Bestimmung des nächsten Spielzugs}
\label{subsec:bestimmung-spielzug}

Durch das Ergebnis, dass alle Algorithmen dieselbe Robustheit erzielt haben, sowie die errechneten Züge zwischen allen übereinstimmen und nur von der Suchtiefe sowie der Gewichtung abhängig sind, kann rein anhand des Zeit- und Speicherbedarfs der für diesen Anwendungsfall beste Suchalgorithmus gewählt werden. Für die Zeitkomplexität wird immer vom schlechtesten Fall der Sortierung des Zustandsraums ausgegangen. Um den Zeit- sowie Speicherbedarf zu vergleichen, muss eine Suchtiefe bestimmt werden. Ab einer Suchtiefe von 3 konnte in den durchgeführten Tests kein Unterschied bei noch höherer Suchtiefe festgestellt werden. Das optimale Ergebnis ist somit bereits eindeutig und eine höhere Tiefe erzielt keinen Vorteil. Es wird der Durchschnitt der drei Spielstellungen aus \ref{cha:stand-der-technik} verglichen.

\begin{table}[H]
	\centering
	\captionabove[Vergleich von Suchalgorithmen]{Vergleich der Suchalgorithmen hinsichtlich Zeitbedarf, Speicherbedarf und Robustheit bei Ressourcenbegrenzung.}
	\label{tab:algorithmus-vergleich}
	
	\renewcommand{\arraystretch}{1.5}
	\setlength{\tabcolsep}{6pt}
	
	\begin{tabular}{p{4.5cm}|p{3.5cm} p{3.5cm} p{3.5cm}}
		Algorithmus & Zeitkomplexität, Zeitbedarf ($\mu$s) & Speicherbedarf (Bytes) & Robustheit \\ \hline
		Alpha-Beta-Pruning & $O(b^{d})$, 70804 & 9490 & 0,365 \\
		Iterative Deepening & $O(b^{d})$, 82531 & 10903 & 0,365 \\
		Move Ordering & $O(b^{d})$, 101495 & 9159 & 0,365 \\
		Negamax & $O(b^{d})$, 71298 & 9424 & 0,365 \\
		Negascout & $O(b^{d})$, 76260 & 9608 & 0,365 \\
	\end{tabular}
\end{table}

Der Zeitbedarf der einzelnen Algorithmen befindet sich in einem ähnlichen Rahmen von etwa einem Zehntel pro Sekunde, um den optimalen Zug zu berechnen. Im Kontext der Zugdauer ist dies nur ein kleiner Bruchteil, weshalb auf hierauf ein geringerer Fokus und somit eine geringere Gewichtung in der Nutzwertanalyse liegt. Der Speicherbedarf hingegen benötigt bereits eine beträchtliche Menge im Verhältnis zum gesamten Arbeitsspeicher des Controllers von 320 KiloByte \autocite{legoreducationLEGOEducationSPIKEd}. Da der Speicher einen begrenzten Spielraum lässt und der Zeitbedarf durch verschiedene Ansätze variiert und Optimierungspotenzial bietet, erhält der Speicherbedarf eine höhere Gewichtung.

\todo[inline]{"Nutzwertanalyse" mit Gewichtung für Speicher und Zeit, Bezug zu Kapitel 3 herstellen}

\paragraph{Ausführung des Spielzugs}
\label{subsec:ausfuehrung-spielzug}

\todo[inline]{Verweis auf Robotik Kapitel} 

\paragraph{Rückfahrt in die Ruheposition}
\label{subsec:rueckfahrt-ruhepos}

\todo[inline]{Wiederholgenauigkeit, Fahrtweg}

\paragraph{Beendigung des Spielzugs}
\label{subsec:beendigung-spielzug}

\todo[inline]{Betätigung der Schaltfläche mit Stift}

% Notizen: Einzelne Lösungenauftellen, diese Bewerten (Nutweranalyse), zusammenstellen zu einem GEsamtkonzept




%
%Herleitung einer Lösung (einer Methodik, eines experimentellen Aufbaus oder von unterschiedlichen Konzepten), Lösungsbewertung und bewusste Wahl des gewählten Vorgehens. An dieser Stelle ist auch auf die Zuverlässigkeit einer Methodik oder auf die Genauigkeit von Untersuchungen einzugehen. Die Überlegungen sollen dazu helfen, mit der angestrebten Lösung die gestellten Anforderungen zu erfüllen, um schließlich die Ziele der Arbeit erreichen zu können.
%
%Bei einer Gegenüberstellung von verschiedenen Lösungsansätzen kann z.~B. eine Nutzwertanalyse helfen. Dabei sind nicht nur z.~B. die Funktion, Leistungsfähigkeit, Umsetzbarkeit und Nutzbarkeit, sondern auch z.~B. wirtschaftliche Aspekte, wie Stück-, Entwicklungskosten oder Ressourcenverbrauch zu berücksichtigen. Sehr bedeutend sind auch Aspekte der Nachhaltigkeit unter Betrachtung des gesamten Lebenszyklus einer erarbeiteten Lösung.
%
%Sowohl bei der Anforderungsdefinition, als auch bei der Lösungsfindung gibt es eine große Anzahl an verschiedenen Methoden. Eine kleine Auswahl ist in der folgenden Aufzählung zu finden.
%
%\begin{itemize}
%\item Anforderungsdefinition mithilfe des Requirements Engineering  \autocite{Pohl.2021}
%\item Systems Engineering Ansatz \autocite{Schluter.2023}
%\item Agile Entwicklungsmethodiken \autocite{Cohn.2010, Martin.2020, Wirdemann.2022}
%\item Klassische Bewertungsverfahren \autocite{Breiing.1997, Zangemeister.2014}
%\end{itemize}
%
%Ziel dieses Kapitels ist, dass auf Basis von umfassend und genau formulierten Anforderungen (ggf. auch Nicht-Zielen) eine Lösungsvielfalt erarbeitet wird, welche anschließend strukturiert bewertet wird, um eine fundierte Begründung für die angestrebte Art der Umsetzung herzuleiten.